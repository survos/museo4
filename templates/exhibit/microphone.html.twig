{% extends 'base.html.twig' %}

{% block title %}Recorder: {{ exhibit.code }}{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link href="/styles/app.css" rel="stylesheet" type="text/css">
  <link href="/styles/install-button.css" rel="stylesheet" type="text/css">
{% endblock %}

{% block javascripts %}
  <script src="/scripts/install.js"></script>
  <script src="/scripts/mediaDevices-getUserMedia-polyfill.js"></script>

  {{ parent() }}
  {{ encore_entry_script_tags('recorder') }}


  <!-- Below is your custom application script
  <script src="/scripts/app.js"></script>
  -->
{% endblock %}

{% block body %}
  <header>
    <h1>Exhibit {{ exhibit.code }}</h1>
  </header>


  <span id="exhibit-info"  data-post-url="{{ path('exhibit_save_audio', exhibit.rp) }}" data-code="{{ exhibit.code }}"></span>

  <div id="existing-audio-player">
    <audio controls="controls" src="{{ exhibit.s3Url }}?time={{ random(25000) }}">
      Your browser does not support the HTML5 audio element.
    </audio>
  </div>


  <div class="row">
    <div class="col-md-6">
      <span style="font-size: large" id="transcript">
      {{ exhibit.transcript }}
      </span>
    </div>

    <div class="col-md-6">
      {{ block('recorder') }}
    </div>
  </div>
      <button id="install-btn">Install app</button>

{% endblock %}

{% block recorder %}

  <div>

    <button id='enable-microphone' class="xx">Enable Microphone</button>
    <a target="_blank" href="{{ exhibit.s3Url}}">{{ exhibit.s3Url }}</a>

  </div>

  <section class="main-controls">
    <canvas class="visualizer" height="60px"></canvas>
    <div id="buttons">
      <button class="record">Record</button>
      <button class="stop">Stop</button>
    </div>
  </section>

  <section class="sound-clips">
    Sound clips here.
  </section>

  <div class="row">
    {{ 0 ? exhibit.transcript }}
  </div>

{% endblock %}
